app-chat .user-card__body {
    color: white !important;
}

/* Hide avatar selector when toggled */
.betternow-hide-avatars app-select-avatar {
    display: none !important;
}


/* REMOVED: Carousel hiding moved to explore.js for blocked user support */
/* The rule was:
app-broadcasts-carousel:not(.betternow-ready) {
    visibility: hidden !important;
}
*/

/* Make header scroll with page instead of staying fixed */
app-channel .header {
    position: relative !important;
    top: 0 !important;
    border-bottom: none !important;
}

/* Grid view styles - only on broadcast pages */
/* NOTE: Using 'betternow-grid-active' to avoid conflict with YouNow's 'grid-view-enabled' */
.betternow-grid-active app-channel .video-player {
    height: auto !important;
    width: 100% !important;
}

.betternow-grid-active app-channel .fullscreen-wrapper {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 4px !important;
    height: auto !important;
    align-content: flex-start !important;
    /* Scale grid proportionally to fill viewport */
    /* 2 rows of 16:9 tiles = width * 0.5625 height */
    /* Subtract 2rem for gap and breathing room */
    max-width: min(100%, calc((100vh - 2rem) / 0.5625)) !important;
    width: 100% !important;
    margin: 0 auto !important;
}

/* When sticky header is ON, account for header height (7rem = topbar + header) + 2rem breathing room */
.betternow-sticky-header.betternow-grid-active app-channel .fullscreen-wrapper {
    max-width: min(100%, calc((100vh - 9rem) / 0.5625)) !important;
}

/* Fullscreen grid view - center content vertically */
.betternow-grid-active app-channel .fullscreen-wrapper:fullscreen,
.betternow-grid-active app-channel .fullscreen-wrapper:-webkit-full-screen {
    height: 100vh !important;
    align-content: center !important;
    justify-content: center !important;
}

/* All videos and placeholder: 2 columns, auto rows */
/* Must override YouNow's inline width/height/left/top styles */
.betternow-grid-active app-channel .fullscreen-wrapper > .video,
.betternow-grid-active app-channel .fullscreen-wrapper > .video.video--placeholder {
    position: relative !important;
    flex: 0 0 calc(50% - 2px) !important;
    max-width: calc(50% - 2px) !important;
    width: calc(50% - 2px) !important;
    height: auto !important;
    aspect-ratio: 16/9 !important;
    left: unset !important;
    top: unset !important;
}

/* 1 video: full width */
.betternow-grid-active app-channel .fullscreen-wrapper > .video:only-child {
    flex: 0 0 100% !important;
    max-width: 100% !important;
}

.betternow-grid-active app-channel .fullscreen-wrapper > .video .video-wrapper,
.betternow-grid-active app-channel .fullscreen-wrapper > .video app-video {
    width: 100% !important;
    height: 100% !important;
}

/* Force cover for regular landscape videos in grid view */
.betternow-grid-active app-channel .fullscreen-wrapper > .video video:not(.is-screenshare):not(.is-portrait) {
    object-fit: cover !important;
}

/* Portrait (mobile) videos use contain to avoid extreme zoom-in */
.betternow-grid-active app-channel .fullscreen-wrapper > .video video.is-portrait {
    object-fit: contain !important;
}

/* Screenshare videos use contain to show full content */
.betternow-grid-active app-channel .fullscreen-wrapper > .video video.is-screenshare {
    object-fit: contain !important;
}

/* Main video wrapper - full size by default in grid */
.betternow-grid-active app-channel .fullscreen-wrapper > .video .main-video-wrapper {
    width: 100% !important;
    height: 100% !important;
}

/* When screenshare is active: position camera feed as small PiP overlay */
/* Target main-video-wrapper with is-headshot (camera off) inside screenshare tiles */
/* Use high specificity to override all states */
.betternow-grid-active app-channel .fullscreen-wrapper > .video:has(video.is-screenshare) > .main-video-wrapper.is-headshot,
.betternow-grid-active app-channel .fullscreen-wrapper > .video:has(video.is-screenshare) > .main-video-wrapper.is-headshot.is-small,
.betternow-grid-active app-channel .fullscreen-wrapper > .video:has(video.is-screenshare) > .main-video-wrapper.is-headshot.is-audio-only-headshot,
.betternow-grid-active app-channel .fullscreen-wrapper > .video:has(video.is-screenshare) > .main-video-wrapper.is-headshot.is-audio-only-headshot.is-small {
    position: absolute !important;
    bottom: -10px !important;
    right: 5px !important;
    top: unset !important;
    left: unset !important;
    width: 100px !important;
    height: 100px !important;
    max-height: 100px !important;
    z-index: 9 !important;
    border-radius: 8px !important;
    overflow: hidden !important;
}

/* Force all audio-animation-wrappers to consistent size in grid view */
/* The is-small class actually makes them LARGER (47.5px), while selected (no is-small) is smaller (40px) */
/* We want all to match the is-small size */
.betternow-grid-active app-channel .fullscreen-wrapper > .video .audio-animation-wrapper:not(.is-small):not(.is-mini) {
    width: var(--stream-user-thumb-medium) !important;
    height: auto !important;
    aspect-ratio: 1 !important;
}

/* Force screenshare PiP avatar to consistent size regardless of is-small/is-mini */
.betternow-grid-active app-channel .fullscreen-wrapper > .video:has(video.is-screenshare) .main-video-wrapper .audio-animation-wrapper,
.betternow-grid-active app-channel .fullscreen-wrapper > .video:has(video.is-screenshare) .main-video-wrapper .audio-animation-wrapper.is-small,
.betternow-grid-active app-channel .fullscreen-wrapper > .video:has(video.is-screenshare) .main-video-wrapper .audio-animation-wrapper.is-mini {
    width: 40px !important;
    height: 40px !important;
    min-height: 40px !important;
    max-height: 40px !important;
    aspect-ratio: 1 / 1 !important;
}

/* Ensure toolbar stays above PiP webcam in grid view */
.betternow-grid-active app-channel .fullscreen-wrapper > .video .toolbar--overlay {
    z-index: 10 !important;
}

/* In grid view, hide ranking/trending notifications on non-broadcaster tiles */
.betternow-grid-active app-channel .fullscreen-wrapper > .video:not([data-betternow-broadcaster]) .main-video-wrapper app-godmessage {
    display: none !important;
}

/* Ensure notifications show on broadcaster's tile */
.betternow-grid-active app-channel .fullscreen-wrapper > .video[data-betternow-broadcaster] .main-video-wrapper app-godmessage {
    display: block !important;
}

/* Rounded corners for all videos */
.video-player .video {
    border-radius: 12px;
    overflow: hidden;
}

/* Hide native volume control on guest video tiles (not main broadcaster) */
/* Only target stream pages (app-channel), not explore page carousel */
app-channel .fullscreen-wrapper > .video app-volume {
    display: none !important;
}

/* Add padding to YouNow toolbar when BetterNow toolbar exists above it */
#betternow-toolbar + app-top-toolbar .toolbar {
    padding-top: 16px !important;
}

/* BetterNow toolbar slider styles */
#betternow-toolbar .slider {
    -webkit-appearance: none;
    appearance: none;
    height: 0.3rem;
    background: var(--color-lightgray, #d3d3d3);
    border-radius: 2rem;
    cursor: pointer;
}

#betternow-toolbar .slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: .8rem;
    height: .8rem;
    border-radius: 50%;
    background: var(--color-primary-green, #08d687);
    cursor: pointer;
}

#betternow-toolbar .slider::-moz-range-thumb {
    -moz-appearance: none;
    appearance: none;
    width: .8rem;
    height: .8rem;
    border-radius: 50%;
    background: var(--color-primary-green, #08d687);
    cursor: pointer;
    border: none;
}

/* Volume slider styles for guest videos */
.betternow-volume-slider .slider {
    -webkit-appearance: none;
    appearance: none;
    width: 60px;
    height: 0.3rem;
    background: var(--color-lightgray, #d3d3d3);
    border-radius: 2rem;
    cursor: pointer;
    transition: opacity 0.2s;
}

.betternow-volume-slider .slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: .8rem;
    height: .8rem;
    border-radius: 50%;
    background: var(--color-primary-green, #08d687);
    cursor: pointer;
}

.betternow-volume-slider .slider::-moz-range-thumb {
    -moz-appearance: none;
    appearance: none;
    width: .8rem;
    height: .8rem;
    border-radius: 50%;
    background: var(--color-primary-green, #08d687);
    cursor: pointer;
    border: none;
}